<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id='l10n_cr_edi_report_payslip' inherit_id="hr_payroll.report_payslip">
        <xpath expr="//div[@id='total']//table//tr" position="replace">
            <tr>
                <th>Name</th>
                <th>Quantity/rate</th>
                <th>Amount</th>
                <th>Total</th>
            </tr>
        </xpath>
        <xpath expr="//span[@t-foreach='o.worked_days_line_ids']" position="replace">
        </xpath>
        <xpath expr="//span[@t-foreach='o.line_ids.filtered(lambda line: line.appears_on_payslip)']" position="replace">
            <tr t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.total)" t-as="line">
                <t t-set="totals" t-value="o.env.ref('l10n_cr_hr_payroll.hr_salary_rule_category_totals') | o.env.ref('l10n_cr_hr_payroll.hr_salary_rule_category_netsa')"/>
                <t t-if="line.category_id not in totals">
                    <td><span t-field="line.name"/></td>
                    <td><span t-field="line.quantity"/></td>
                    <td class="text-right"><span t-esc="line.amount"
                              t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/></td>
                    <td class="text-right"><span t-esc="line.total"
                              t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/></td>
                </t>
                <t t-if="line.category_id in totals">
                    <td style="background-color: #b6bcc0;border: 1px solid gray;"><strong><span t-field="line.name"/></strong></td>
                    <td style="background-color: #b6bcc0;border: 1px solid gray;"><strong><span t-field="line.quantity"/></strong></td>
                    <td class="text-right" style="background-color: #b6bcc0;border: 1px solid gray;"><strong><span t-esc="line.amount"
                        t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/></strong></td>
                    <td class="text-right" style="background-color: #b6bcc0;border: 1px solid gray;"><strong><span t-esc="line.total"
                        t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/></strong></td>
                </t>
            </tr>
        </xpath>
        <xpath expr="//div[@id='total']" position="after">
            <p><span t-field="o.note"/></p>
            <p class="text-right"><strong>Authorized signature</strong></p>
        </xpath>
        <xpath expr="//table[2]" position="replace">
        </xpath>
        <xpath expr="//table[@name='contract-infos']" position="replace">
        </xpath>
        <xpath expr="//p[@t-if='o.net_wage &gt;= 0']" position="replace">
        </xpath>
        <xpath expr="//p[@t-if='o.net_wage &lt; 0']" position="replace">
        </xpath>
        <xpath expr="//p[3]" position="replace">
        </xpath>
        <xpath expr="//table[@name='employee-infos']" position="replace">
            <table name="employee-infos" class="table table-sm table-bordered">
                <tr>
                    <td><strong>Designation</strong></td>
                    <td colspan="3"><span t-field="o.employee_id.job_id"/></td>
                </tr>
                <tr>
                    <td><strong>Address</strong></td>
                    <td colspan="3">
                        <div t-field="o.employee_id.address_home_id" t-options='{"widget": "contact", "fields": ["address", "name", "phone"], "no_marker": True, "phone_icons": True}'/>
                    </td>
                </tr>
                <tr>
                    <td><strong>Email</strong></td>
                    <td><span t-field="o.employee_id.work_email"/></td>
                    <td><strong>Identification No</strong></td>
                    <td><span t-field="o.employee_id.identification_id"/></td>
                </tr>
                <tr>
                    <td><strong>Reference</strong></td>
                    <td><span t-field="o.number"/></td>
                    <td><strong>Bank Account</strong></td>
                    <td><span t-field="o.employee_id.bank_account_id"/></td>
                </tr>
                <tr>
                    <td><strong>Date From</strong></td>
                    <td><span t-field="o.date_from"/></td>
                    <td><strong>Date To</strong></td>
                    <td><span t-field="o.date_to"/></td>
                </tr>
            </table>
        </xpath>
    </template>
</odoo>
